# build larsoftobj distribution

basequal=${1}

# specify version to bootstrap and setup ups
check_ups v6_0_8

build_bundle gallery-@GALLERY_DOT_VERSION@ ${basequal}
status=$?
if (( ${status} != 0)); then
  cat 1>&2 <<EOF
Build of gallery-@GALLERY_DOT_VERSION@ bundle failed with status ${status}
EOF
  return ${status}
fi

# infrastructure
for cv in @CMAKE_VERSION_LIST@; do
  do_build cmake ${cv}
done
for _cps_cetmodules_ver in @CETMODULES_VERSION_LIST@; do
  ensure_support_package -f NULL -- cetmodules ${_cps_cetmodules_ver}
done
ensure_cetbuildtools @CETBUILDTOOLS_VERSION_LIST@
unset _cps_cetmodules_ver

do_build hub @HUB_VERSION@
build_noarch mrb @MRB_VERSION@

do_build dk2nudata @DK2NUDATA_VERSION@ ${basequal}

build_cet nusimdata  @NUSIMDATA_VERSION@ ${basequal}
build_cet -G LArSoft larcoreobj @LARCOREOBJ_VERSION@ ${basequal}
build_cet -G LArSoft -n larcorealg @LARCOREALG_VERSION@ ${basequal}
build_cet -G LArSoft lardataobj @LARDATAOBJ_VERSION@ ${basequal}
build_cet -G LArSoft lardataalg @LARDATAALG_VERSION@ ${basequal}
build_cet -G LArSoft larvecutils @LARVECUTILS_VERSION@ ${basequal}
build_cet -G LArSoft larsoftobj @LARSOFTOBJ_VERSION@ ${basequal}

return 0
